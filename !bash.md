### Задания по Bash

**1. При создании скрипта что указывается первой строкой в файле?**

Шебанг. Путь к интерпретатору для скрипта. Можно использовать Python или Perl, но, как правило, используется `#!/bin/sh` для сохранения совместимости на разных устройствах.

**2. Что произойдет при выполнении команды init 0 ?**

Выключает устройство аналогично `shutdown -h now`, на команду требуются соответствующие права.

**3. Команды ECHO и echo в bash идентичны и вызывают одинаковую функцию?**

Нет, UNIX - регистрозависимая система.

**4. Будет ли отличаться команда введенная в терминале и в sh скрипте?**

Да, интерпретатор в скрипте может отличаться от интерпретатора терминальной сессии. Также в скрипте может быть переназначено значение `$PATH`

**5. Как добавить права на запуск файлу (можно несколько способов)**

`chmod +x filename.sh`

**6. Что означает разделитель || между командами в скрипте?**

Противоположность `&&`, выводит следующую команду, если exitcode первой команды отличается от 0 (успешное выполнение).

**7. По скрипту после выполнения команды следующей строкой идет проверка: `[ $? -eq 0 ] && exit`, опишите принцип ее работы?**

`-eq` - арифметическое сравнение кода вывода последней команды (`$?`) с нулём. Если последняя команда выполнена без ошибок - произойдёт выполнение `exit`.

**8. Существует скрипт, который при запуске должен поменять в файле все foo на bar, но при выполнении ошибка, в чем причина?**

```
...
a='foo'
b='bar'
sed -i 's/$a/$b/g' /file.txt
```

При использовании `sed` с переменными необходимо использовать двойные кавычки. Также стоит использовать другой разделитель или экранировать символы, если в переменной присутствует слеш.

**9. Мы хотим записать в переменную результат выполнения команды, отметьте все строки ниже, которые это делают корректно:**
```
✅a=`tail -n1 /file.txt`
❌a =`tail -n1 /file.txt`
❌a='tail -n1 /file.txt'
❌atail -n1 /file.txt > $a
❌ata="tail -n1 /file.txt"
✅a="`tail -n1 /file.txt`"
❌a='`tail -n1 /file.txt`'
✅a=$(tail -n1 /file.txt)
❌a=$(tail -n1 /file.txt`
❌$(tail -n1 /file.txt) > $a
❌`tail -n1 /file.txt` > $a
```

**10. Сколько всего циклов в bash? перечислите их:**

`for` - со счётчиком, `while` (пока условие истинно) и `until` (пока условие ложно)

**11. Укажите символы начала и конца строки в регулярных выражениях в linux:**

`^` для начала строки и `$` для её окончания.

**12. Комманда cat /1234.txt возвращает нам следующие данные: `Данные которые нам НЕ нужны;Эти данные нам нужны;Снова НЕ нужные данные` Как при выполнение запроса нам исключить вывод излишней информации в данном случае? напишите команду(ы):**

Реализация через `awk`: `cat /1234.txt| awk --field-separator=';' '{ print $2}' `

**13. Что вернет данная команда `hostname | sed 's/[^0-9]//g;'`, если hostname имеет значение `s777777ibgm_zope2`**

77777772

**14. Что сделает данный sed: `sed -r 's/[ \t]+/ /g;' /file.txt`**

Замена всех пробелов и табуляций в файле `/file.txt`

**15. Существует файл guid.txt с гудами операций: Каждый гуид нам необходимо по отдельности поставить в уже написанную функцию SELECT_GUID, а результат выполнения функции записать в переменную, результат выполнения может быть 'OK' или 'FAIL'. Количество гуидов в файле динамическое, каждый гуид на новой строке, результатом должен быть файл с содержимым 'guid;OK или FAIL'**

```
#!/bin/sh

SELECT_GUID() {
    if (( RANDOM % 2 )); then echo "OK"; else echo "FAIL"; fi
}

while read line;
do
    echo "$line;$(SELECT_GUID)"
done < $1
```
Скрипт выводит вывод для функции SELECT_GUID для каждого из GUID'ов в файле guid.txt, функция случайным образом выдаёт "OK" или "FAIL" для убедительности.
Вывод в файл: `./guid_checker.sh guid.txt >> results.txt`
